<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Mini Royale 2D</title>
<style>
body{margin:0;background:#020617;color:white;font-family:Arial;overflow:hidden}
canvas{display:block;margin:auto;background:#020617}
#menu{
 position:fixed;inset:0;
 display:flex;flex-direction:column;
 justify-content:center;align-items:center;
 background:#020617
}
button{
 padding:12px 25px;
 margin:8px;
 font-size:18px;
 background:#38bdf8;
 border:none;border-radius:6px;
 cursor:pointer
}
#ui{
 position:fixed;top:10px;left:10px;
 font-size:16px
}
</style>
</head>
<body>

<div id="menu">
<h1>Mini Royale 2D</h1>
<button onclick="start('solo')">Battle Royale</button>
<button onclick="start('practice')">Practice</button>
<button onclick="start('survival')">Survival</button>
</div>

<div id="ui">
‚ù§Ô∏è <span id="hp">100</span><br>
üå≤ Wood: <span id="wood">0</span>
</div>

<canvas id="c" width="900" height="600"></canvas>

<script>
const c=document.getElementById("c"),ctx=c.getContext("2d");
const keys={},mouse={x:0,y:0,down:false};
let mode=null,storm=400;

document.onkeydown=e=>keys[e.key.toLowerCase()]=true;
document.onkeyup=e=>keys[e.key.toLowerCase()]=false;
document.onmousemove=e=>{
 let r=c.getBoundingClientRect();
 mouse.x=e.clientX-r.left;
 mouse.y=e.clientY-r.top;
}
document.onmousedown=()=>mouse.down=true;
document.onmouseup=()=>mouse.down=false;

const player={x:450,y:300,hp:100,wood:0};
const bullets=[],enemies=[],trees=[],walls=[];

function start(m){
 mode=m;
 document.getElementById("menu").style.display="none";
 init();
 loop();
}

function init(){
 for(let i=0;i<12;i++)
  trees.push({x:Math.random()*800+50,y:Math.random()*500+50,hp:40});
 for(let i=0;i<6;i++)
  enemies.push({x:Math.random()*800,y:Math.random()*600,hp:40});
}

function shoot(){
 bullets.push({
  x:player.x,y:player.y,
  dx:(mouse.x-player.x)/10,
  dy:(mouse.y-player.y)/10
 });
}

function update(){
 if(keys.w)player.y-=3;
 if(keys.s)player.y+=3;
 if(keys.a)player.x-=3;
 if(keys.d)player.x+=3;

 if(mouse.down && Math.random()<0.25) shoot();

 if(keys.b && player.wood>=10){
  walls.push({x:player.x,y:player.y});
  player.wood-=10;
  keys.b=false;
 }

 bullets.forEach(b=>{b.x+=b.dx*6;b.y+=b.dy*6});

 enemies.forEach(e=>{
  let dx=player.x-e.x,dy=player.y-e.y;
  let d=Math.hypot(dx,dy);
  e.x+=dx/d*1.2;e.y+=dy/d*1.2;
  if(d<18) player.hp-=0.15;
 });

 trees.forEach(t=>{
  if(t.hp>0 && mouse.down && Math.hypot(mouse.x-t.x,mouse.y-t.y)<25){
   t.hp--;
   if(t.hp<=0) player.wood+=10;
  }
 });

 bullets.forEach(b=>{
  enemies.forEach(e=>{
   if(e.hp>0 && Math.hypot(b.x-e.x,b.y-e.y)<14){
    e.hp-=10;b.x=-999;
   }
  });
 });

 if(mode==="solo"){
  storm-=0.03;
  if(Math.hypot(player.x-450,player.y-300)>storm)
   player.hp-=0.25;
 }

 document.getElementById("hp").textContent=Math.max(0,player.hp|0);
 document.getElementById("wood").textContent=player.wood;
}

function draw(){
 ctx.clearRect(0,0,900,600);

 if(mode==="solo"){
  ctx.strokeStyle="purple";
  ctx.beginPath();
  ctx.arc(450,300,storm,0,7);
  ctx.stroke();
 }

 trees.forEach(t=>{
  if(t.hp>0){
   ctx.fillStyle="#22c55e";
   ctx.beginPath();
   ctx.arc(t.x,t.y,18,0,7);
   ctx.fill();
  }
 });

 walls.forEach(w=>{
  ctx.fillStyle="#a16207";
  ctx.fillRect(w.x-15,w.y-15,30,30);
 });

 enemies.forEach(e=>{
  if(e.hp>0){
   ctx.fillStyle="red";
   ctx.beginPath();
   ctx.arc(e.x,e.y,12,0,7);
   ctx.fill();
  }
 });

 bullets.forEach(b=>{
  ctx.fillStyle="yellow";
  ctx.fillRect(b.x,b.y,4,4);
 });

 ctx.fillStyle="#38bdf8";
 ctx.beginPath();
 ctx.arc(player.x,player.y,12,0,7);
 ctx.fill();
}

function loop(){
 if(player.hp<=0) return alert("Game Over");
 update();
 draw();
 requestAnimationFrame(loop);
}
</script>
</body>
</html>
